
PLAY [Expert cheking git-repository] ***************************************************************

TASK [==========================Checking that the Git repository is cloned==========================] ***
ok: [localhost]

TASK [debug] ***************************************************************************************
ok: [localhost] => {
    "msg": "SUCCESS"
}

TASK [debug] ***************************************************************************************
skipping: [localhost]

TASK [==========================Connection VM==========================] ***************************
changed: [localhost]

TASK [debug] ***************************************************************************************
ok: [localhost] => {
    "conn_vm.stdout_lines": [
        "192.168.144.22 | SUCCESS => {",
        "    \"ansible_facts\": {",
        "        \"discovered_interpreter_python\": \"/usr/libexec/platform-python\"",
        "    },",
        "    \"changed\": false,",
        "    \"ping\": \"pong\"",
        "}",
        "192.168.144.23 | SUCCESS => {",
        "    \"ansible_facts\": {",
        "        \"discovered_interpreter_python\": \"/usr/libexec/platform-python\"",
        "    },",
        "    \"changed\": false,",
        "    \"ping\": \"pong\"",
        "}",
        "192.168.144.21 | SUCCESS => {",
        "    \"ansible_facts\": {",
        "        \"discovered_interpreter_python\": \"/usr/libexec/platform-python\"",
        "    },",
        "    \"changed\": false,",
        "    \"ping\": \"pong\"",
        "}"
    ]
}

PLAY [Expert Ansible tasks] ************************************************************************

TASK [==========================Checking that the curl package is installed==========================] ***
ok: [192.168.144.22]
ok: [192.168.144.23]
ok: [192.168.144.21]

TASK [debug] ***************************************************************************************
ok: [192.168.144.21] => {
    "msg": "SUCCESS"
}
ok: [192.168.144.22] => {
    "msg": "SUCCESS"
}
ok: [192.168.144.23] => {
    "msg": "SUCCESS"
}

TASK [debug] ***************************************************************************************
skipping: [192.168.144.21]
skipping: [192.168.144.22]
skipping: [192.168.144.23]

TASK [==========================Checking that the docker package is installed==========================] ***
ok: [192.168.144.21]
ok: [192.168.144.23]
ok: [192.168.144.22]

TASK [debug] ***************************************************************************************
ok: [192.168.144.21] => {
    "msg": "SUCCESS"
}
ok: [192.168.144.22] => {
    "msg": "SUCCESS"
}
ok: [192.168.144.23] => {
    "msg": "SUCCESS"
}

TASK [debug] ***************************************************************************************
skipping: [192.168.144.21]
skipping: [192.168.144.22]
skipping: [192.168.144.23]

TASK [==========================Checking that firewalld is activated==========================] ****
ok: [192.168.144.21]
ok: [192.168.144.23]
ok: [192.168.144.22]

TASK [debug] ***************************************************************************************
ok: [192.168.144.21] => {
    "ansible_facts.services['firewalld.service'].state": "running"
}
ok: [192.168.144.22] => {
    "ansible_facts.services['firewalld.service'].state": "running"
}
ok: [192.168.144.23] => {
    "ansible_facts.services['firewalld.service'].state": "running"
}

TASK [==========================Checking open firewalld ports==========================] ***********
changed: [192.168.144.21]
changed: [192.168.144.22]
changed: [192.168.144.23]

TASK [debug] ***************************************************************************************
ok: [192.168.144.21] => {
    "ports.stdout_lines": [
        "public (active)",
        "  target: default",
        "  icmp-block-inversion: no",
        "  interfaces: enp0s3",
        "  sources: ",
        "  services: cockpit dhcpv6-client ssh",
        "  ports: 80/tcp 8080/tcp 1834/tcp",
        "  protocols: ",
        "  forward: no",
        "  masquerade: no",
        "  forward-ports: ",
        "  source-ports: ",
        "  icmp-blocks: ",
        "  rich rules: "
    ]
}
ok: [192.168.144.22] => {
    "ports.stdout_lines": [
        "public (active)",
        "  target: default",
        "  icmp-block-inversion: no",
        "  interfaces: enp0s3",
        "  sources: ",
        "  services: cockpit dhcpv6-client ssh",
        "  ports: 80/tcp 8080/tcp 1834/tcp",
        "  protocols: ",
        "  forward: no",
        "  masquerade: no",
        "  forward-ports: ",
        "  source-ports: ",
        "  icmp-blocks: ",
        "  rich rules: "
    ]
}
ok: [192.168.144.23] => {
    "ports.stdout_lines": [
        "public (active)",
        "  target: default",
        "  icmp-block-inversion: no",
        "  interfaces: enp0s3",
        "  sources: ",
        "  services: cockpit dhcpv6-client ssh",
        "  ports: 80/tcp 8080/tcp 1834/tcp",
        "  protocols: ",
        "  forward: no",
        "  masquerade: no",
        "  forward-ports: ",
        "  source-ports: ",
        "  icmp-blocks: ",
        "  rich rules: "
    ]
}

TASK [==========================Check if port is open for SSH==========================] ***********
changed: [192.168.144.21]
changed: [192.168.144.22]
changed: [192.168.144.23]

TASK [debug] ***************************************************************************************
ok: [192.168.144.21] => {
    "ssh_port.stdout_lines": [
        "1:Port 1834"
    ]
}
ok: [192.168.144.22] => {
    "ssh_port.stdout_lines": [
        "1:Port 1834"
    ]
}
ok: [192.168.144.23] => {
    "ssh_port.stdout_lines": [
        "1:Port 1834"
    ]
}

TASK [==========================Checking if public key authorization is allowed==========================] ***
changed: [192.168.144.21]
changed: [192.168.144.22]
changed: [192.168.144.23]

TASK [debug] ***************************************************************************************
ok: [192.168.144.21] => {
    "pubkey_allowed.stdout_lines": [
        "PubkeyAuthentication yes"
    ]
}
ok: [192.168.144.22] => {
    "pubkey_allowed.stdout_lines": [
        "PubkeyAuthentication yes"
    ]
}
ok: [192.168.144.23] => {
    "pubkey_allowed.stdout_lines": [
        "PubkeyAuthentication yes"
    ]
}

TASK [==========================Checking if users are created==========================] ***********
changed: [192.168.144.21]
changed: [192.168.144.22]
changed: [192.168.144.23]

TASK [debug] ***************************************************************************************
ok: [192.168.144.21] => {
    "check_users_created.stdout_lines": [
        "Webdeveloper",
        "Devopsengineer",
        "Projectmanager"
    ]
}
ok: [192.168.144.22] => {
    "check_users_created.stdout_lines": [
        "Webdeveloper",
        "Devopsengineer",
        "Projectmanager"
    ]
}
ok: [192.168.144.23] => {
    "check_users_created.stdout_lines": [
        "Webdeveloper",
        "Devopsengineer",
        "Projectmanager"
    ]
}

TASK [==========================Keys check==========================] ******************************
changed: [192.168.144.21]
changed: [192.168.144.22]
changed: [192.168.144.23]

TASK [debug] ***************************************************************************************
ok: [192.168.144.21] => {
    "keys_check.stdout_lines": [
        "ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQCovvBkeLIDsvbCyQsMWtPWVgGVKcwAqRONiBJ9JyrVCQbruyMPutatjSlhNpYXKLlP4BXHrGrmAVqeI155li1fkNP5Il7viHRE0HvA3M2extNGDDCiX5f5OlIeT9p/D9OHvWWozLjN2NAGEW24feuzKPZb6Kyv2W3yHbiIU3wt8v50VAIA2+PAfElHp1jplGHQLmYuT6Cc26Pn3WYXZ8t8oU77T6Ki5qDG5V5DVZI3Ym5gqqXXtJYzET9piJvO6qiIcgljtOGlUH9H9QNLEbuF+RKIhL3pFAnF8S79Km2A3j9KFZw6prDR6/VeMffMrNSZLeYztzDGEzm35uz5q6j+qrKsuA4SfpbSOcBwaariOoKpb6JfogoJRgCqxR5O1AKR/Oqhdk6JOlKJk+tIXFmOczH7da/W93f8KGGve4iHRvz/e3vYA7exXIVkD8mc/VmIoT1kqh/uNGia/adnyCgvMpL8JXLJgY2DThpjHslUr0RTEpQJTLTka3D43YV37kM=",
        "ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQCovvBkeLIDsvbCyQsMWtPWVgGVKcwAqRONiBJ9JyrVCQbruyMPutatjSlhNpYXKLlP4BXHrGrmAVqeI155li1fkNP5Il7viHRE0HvA3M2extNGDDCiX5f5OlIeT9p/D9OHvWWozLjN2NAGEW24feuzKPZb6Kyv2W3yHbiIU3wt8v50VAIA2+PAfElHp1jplGHQLmYuT6Cc26Pn3WYXZ8t8oU77T6Ki5qDG5V5DVZI3Ym5gqqXXtJYzET9piJvO6qiIcgljtOGlUH9H9QNLEbuF+RKIhL3pFAnF8S79Km2A3j9KFZw6prDR6/VeMffMrNSZLeYztzDGEzm35uz5q6j+qrKsuA4SfpbSOcBwaariOoKpb6JfogoJRgCqxR5O1AKR/Oqhdk6JOlKJk+tIXFmOczH7da/W93f8KGGve4iHRvz/e3vYA7exXIVkD8mc/VmIoT1kqh/uNGia/adnyCgvMpL8JXLJgY2DThpjHslUr0RTEpQJTLTka3D43YV37kM=",
        "ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQCovvBkeLIDsvbCyQsMWtPWVgGVKcwAqRONiBJ9JyrVCQbruyMPutatjSlhNpYXKLlP4BXHrGrmAVqeI155li1fkNP5Il7viHRE0HvA3M2extNGDDCiX5f5OlIeT9p/D9OHvWWozLjN2NAGEW24feuzKPZb6Kyv2W3yHbiIU3wt8v50VAIA2+PAfElHp1jplGHQLmYuT6Cc26Pn3WYXZ8t8oU77T6Ki5qDG5V5DVZI3Ym5gqqXXtJYzET9piJvO6qiIcgljtOGlUH9H9QNLEbuF+RKIhL3pFAnF8S79Km2A3j9KFZw6prDR6/VeMffMrNSZLeYztzDGEzm35uz5q6j+qrKsuA4SfpbSOcBwaariOoKpb6JfogoJRgCqxR5O1AKR/Oqhdk6JOlKJk+tIXFmOczH7da/W93f8KGGve4iHRvz/e3vYA7exXIVkD8mc/VmIoT1kqh/uNGia/adnyCgvMpL8JXLJgY2DThpjHslUr0RTEpQJTLTka3D43YV37kM="
    ]
}
ok: [192.168.144.22] => {
    "keys_check.stdout_lines": [
        "ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQCovvBkeLIDsvbCyQsMWtPWVgGVKcwAqRONiBJ9JyrVCQbruyMPutatjSlhNpYXKLlP4BXHrGrmAVqeI155li1fkNP5Il7viHRE0HvA3M2extNGDDCiX5f5OlIeT9p/D9OHvWWozLjN2NAGEW24feuzKPZb6Kyv2W3yHbiIU3wt8v50VAIA2+PAfElHp1jplGHQLmYuT6Cc26Pn3WYXZ8t8oU77T6Ki5qDG5V5DVZI3Ym5gqqXXtJYzET9piJvO6qiIcgljtOGlUH9H9QNLEbuF+RKIhL3pFAnF8S79Km2A3j9KFZw6prDR6/VeMffMrNSZLeYztzDGEzm35uz5q6j+qrKsuA4SfpbSOcBwaariOoKpb6JfogoJRgCqxR5O1AKR/Oqhdk6JOlKJk+tIXFmOczH7da/W93f8KGGve4iHRvz/e3vYA7exXIVkD8mc/VmIoT1kqh/uNGia/adnyCgvMpL8JXLJgY2DThpjHslUr0RTEpQJTLTka3D43YV37kM=",
        "ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQCovvBkeLIDsvbCyQsMWtPWVgGVKcwAqRONiBJ9JyrVCQbruyMPutatjSlhNpYXKLlP4BXHrGrmAVqeI155li1fkNP5Il7viHRE0HvA3M2extNGDDCiX5f5OlIeT9p/D9OHvWWozLjN2NAGEW24feuzKPZb6Kyv2W3yHbiIU3wt8v50VAIA2+PAfElHp1jplGHQLmYuT6Cc26Pn3WYXZ8t8oU77T6Ki5qDG5V5DVZI3Ym5gqqXXtJYzET9piJvO6qiIcgljtOGlUH9H9QNLEbuF+RKIhL3pFAnF8S79Km2A3j9KFZw6prDR6/VeMffMrNSZLeYztzDGEzm35uz5q6j+qrKsuA4SfpbSOcBwaariOoKpb6JfogoJRgCqxR5O1AKR/Oqhdk6JOlKJk+tIXFmOczH7da/W93f8KGGve4iHRvz/e3vYA7exXIVkD8mc/VmIoT1kqh/uNGia/adnyCgvMpL8JXLJgY2DThpjHslUr0RTEpQJTLTka3D43YV37kM=",
        "ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQCovvBkeLIDsvbCyQsMWtPWVgGVKcwAqRONiBJ9JyrVCQbruyMPutatjSlhNpYXKLlP4BXHrGrmAVqeI155li1fkNP5Il7viHRE0HvA3M2extNGDDCiX5f5OlIeT9p/D9OHvWWozLjN2NAGEW24feuzKPZb6Kyv2W3yHbiIU3wt8v50VAIA2+PAfElHp1jplGHQLmYuT6Cc26Pn3WYXZ8t8oU77T6Ki5qDG5V5DVZI3Ym5gqqXXtJYzET9piJvO6qiIcgljtOGlUH9H9QNLEbuF+RKIhL3pFAnF8S79Km2A3j9KFZw6prDR6/VeMffMrNSZLeYztzDGEzm35uz5q6j+qrKsuA4SfpbSOcBwaariOoKpb6JfogoJRgCqxR5O1AKR/Oqhdk6JOlKJk+tIXFmOczH7da/W93f8KGGve4iHRvz/e3vYA7exXIVkD8mc/VmIoT1kqh/uNGia/adnyCgvMpL8JXLJgY2DThpjHslUr0RTEpQJTLTka3D43YV37kM="
    ]
}
ok: [192.168.144.23] => {
    "keys_check.stdout_lines": [
        "ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQCovvBkeLIDsvbCyQsMWtPWVgGVKcwAqRONiBJ9JyrVCQbruyMPutatjSlhNpYXKLlP4BXHrGrmAVqeI155li1fkNP5Il7viHRE0HvA3M2extNGDDCiX5f5OlIeT9p/D9OHvWWozLjN2NAGEW24feuzKPZb6Kyv2W3yHbiIU3wt8v50VAIA2+PAfElHp1jplGHQLmYuT6Cc26Pn3WYXZ8t8oU77T6Ki5qDG5V5DVZI3Ym5gqqXXtJYzET9piJvO6qiIcgljtOGlUH9H9QNLEbuF+RKIhL3pFAnF8S79Km2A3j9KFZw6prDR6/VeMffMrNSZLeYztzDGEzm35uz5q6j+qrKsuA4SfpbSOcBwaariOoKpb6JfogoJRgCqxR5O1AKR/Oqhdk6JOlKJk+tIXFmOczH7da/W93f8KGGve4iHRvz/e3vYA7exXIVkD8mc/VmIoT1kqh/uNGia/adnyCgvMpL8JXLJgY2DThpjHslUr0RTEpQJTLTka3D43YV37kM=",
        "ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQCovvBkeLIDsvbCyQsMWtPWVgGVKcwAqRONiBJ9JyrVCQbruyMPutatjSlhNpYXKLlP4BXHrGrmAVqeI155li1fkNP5Il7viHRE0HvA3M2extNGDDCiX5f5OlIeT9p/D9OHvWWozLjN2NAGEW24feuzKPZb6Kyv2W3yHbiIU3wt8v50VAIA2+PAfElHp1jplGHQLmYuT6Cc26Pn3WYXZ8t8oU77T6Ki5qDG5V5DVZI3Ym5gqqXXtJYzET9piJvO6qiIcgljtOGlUH9H9QNLEbuF+RKIhL3pFAnF8S79Km2A3j9KFZw6prDR6/VeMffMrNSZLeYztzDGEzm35uz5q6j+qrKsuA4SfpbSOcBwaariOoKpb6JfogoJRgCqxR5O1AKR/Oqhdk6JOlKJk+tIXFmOczH7da/W93f8KGGve4iHRvz/e3vYA7exXIVkD8mc/VmIoT1kqh/uNGia/adnyCgvMpL8JXLJgY2DThpjHslUr0RTEpQJTLTka3D43YV37kM=",
        "ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQCovvBkeLIDsvbCyQsMWtPWVgGVKcwAqRONiBJ9JyrVCQbruyMPutatjSlhNpYXKLlP4BXHrGrmAVqeI155li1fkNP5Il7viHRE0HvA3M2extNGDDCiX5f5OlIeT9p/D9OHvWWozLjN2NAGEW24feuzKPZb6Kyv2W3yHbiIU3wt8v50VAIA2+PAfElHp1jplGHQLmYuT6Cc26Pn3WYXZ8t8oU77T6Ki5qDG5V5DVZI3Ym5gqqXXtJYzET9piJvO6qiIcgljtOGlUH9H9QNLEbuF+RKIhL3pFAnF8S79Km2A3j9KFZw6prDR6/VeMffMrNSZLeYztzDGEzm35uz5q6j+qrKsuA4SfpbSOcBwaariOoKpb6JfogoJRgCqxR5O1AKR/Oqhdk6JOlKJk+tIXFmOczH7da/W93f8KGGve4iHRvz/e3vYA7exXIVkD8mc/VmIoT1kqh/uNGia/adnyCgvMpL8JXLJgY2DThpjHslUr0RTEpQJTLTka3D43YV37kM="
    ]
}

TASK [==========================Checking that docker-compose is installed using the docker-compose script==========================] ***
changed: [192.168.144.21]
changed: [192.168.144.22]
changed: [192.168.144.23]

TASK [debug] ***************************************************************************************
ok: [192.168.144.21] => {
    "compose_sh.stdout_lines": [
        "docker-compose: /usr/local/bin/docker-compose"
    ]
}
ok: [192.168.144.22] => {
    "compose_sh.stdout_lines": [
        "docker-compose: /usr/local/bin/docker-compose"
    ]
}
ok: [192.168.144.23] => {
    "compose_sh.stdout_lines": [
        "docker-compose: /usr/local/bin/docker-compose"
    ]
}

TASK [==========================Verifying that the skillcloud-nginx directory has been created==========================] ***
ok: [192.168.144.21]
ok: [192.168.144.22]
ok: [192.168.144.23]

TASK [debug] ***************************************************************************************
ok: [192.168.144.21] => {
    "msg": "SUCCESS"
}
ok: [192.168.144.22] => {
    "msg": "SUCCESS"
}
ok: [192.168.144.23] => {
    "msg": "SUCCESS"
}

TASK [debug] ***************************************************************************************
skipping: [192.168.144.21]
skipping: [192.168.144.22]
skipping: [192.168.144.23]

TASK [==========================Checking if files were copied to virtual machines==========================] ***
changed: [192.168.144.21]
changed: [192.168.144.22]
changed: [192.168.144.23]

TASK [debug] ***************************************************************************************
ok: [192.168.144.21] => {
    "copy_files_skillcloud_nginx.stdout_lines": [
        "docker-compose.sh",
        "docker-compose.yml",
        "Dockerfile-balance",
        "Dockerfile-site",
        "index.html",
        "nginx.conf",
        "README.md",
        "Users"
    ]
}
ok: [192.168.144.22] => {
    "copy_files_skillcloud_nginx.stdout_lines": [
        "docker-compose.sh",
        "docker-compose.yml",
        "Dockerfile-balance",
        "Dockerfile-site",
        "index.html",
        "nginx.conf",
        "README.md",
        "Users"
    ]
}
ok: [192.168.144.23] => {
    "copy_files_skillcloud_nginx.stdout_lines": [
        "docker-compose.sh",
        "docker-compose.yml",
        "Dockerfile-balance",
        "Dockerfile-site",
        "index.html",
        "nginx.conf",
        "README.md",
        "Users"
    ]
}

TASK [==========================Checking if SSH daemon has been restarted==========================] ***
changed: [192.168.144.21]
changed: [192.168.144.22]
changed: [192.168.144.23]

TASK [debug] ***************************************************************************************
ok: [192.168.144.21] => {
    "sshd_time_restarted.stdout_lines": [
        "ExecMainStartTimestamp=Wed 2021-11-24 04:05:19 EST"
    ]
}
ok: [192.168.144.22] => {
    "sshd_time_restarted.stdout_lines": [
        "ExecMainStartTimestamp=Wed 2021-11-24 04:05:18 EST"
    ]
}
ok: [192.168.144.23] => {
    "sshd_time_restarted.stdout_lines": [
        "ExecMainStartTimestamp=Wed 2021-11-24 04:05:18 EST"
    ]
}

TASK [==========================Checking if SSH daemon has been restarted==========================] ***
changed: [192.168.144.21]
changed: [192.168.144.22]
changed: [192.168.144.23]

TASK [debug] ***************************************************************************************
ok: [192.168.144.21] => {
    "firewalld_time_restarted.stdout_lines": [
        "ExecMainStartTimestamp=Wed 2021-11-24 04:05:18 EST"
    ]
}
ok: [192.168.144.22] => {
    "firewalld_time_restarted.stdout_lines": [
        "ExecMainStartTimestamp=Wed 2021-11-24 04:05:18 EST"
    ]
}
ok: [192.168.144.23] => {
    "firewalld_time_restarted.stdout_lines": [
        "ExecMainStartTimestamp=Wed 2021-11-24 04:05:18 EST"
    ]
}

TASK [==========================Checking restarted VM==========================] *******************
changed: [192.168.144.21]
changed: [192.168.144.22]
changed: [192.168.144.23]

TASK [debug] ***************************************************************************************
ok: [192.168.144.21] => {
    "restarted_vm.stdout_lines": [
        "2021-11-24 04:05:13"
    ]
}
ok: [192.168.144.22] => {
    "restarted_vm.stdout_lines": [
        "2021-11-24 04:05:13"
    ]
}
ok: [192.168.144.23] => {
    "restarted_vm.stdout_lines": [
        "2021-11-24 04:05:13"
    ]
}

PLAY RECAP *****************************************************************************************
192.168.144.21             : ok=28   changed=10   unreachable=0    failed=0    skipped=3    rescued=0    ignored=0   
192.168.144.22             : ok=28   changed=10   unreachable=0    failed=0    skipped=3    rescued=0    ignored=0   
192.168.144.23             : ok=28   changed=10   unreachable=0    failed=0    skipped=3    rescued=0    ignored=0   
localhost                  : ok=4    changed=1    unreachable=0    failed=0    skipped=1    rescued=0    ignored=0   

